\documentclass{book}
\usepackage[utf8]{inputenc}
\usepackage{amsmath}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{tikz-cd}
\usepackage{amsthm}
\usepackage{csquotes}

\theoremstyle{definition}
\newtheorem{definition}{Definition}[section]
\newtheorem{theorem}{Theorem}
\newtheorem{proposition}{Proposition}
\newtheorem{lemma}{Lemma}
\tikzcdset{row sep/normal=2.7em}
\tikzcdset{column sep/normal=3.6em}

% Helpful command for typing arrows
\newcommand{\arr}[3]{#1 : #2 \rightarrow #3}
\newcommand\id{\mathit{id}}
\newcommand\Hom{\text{Hom}}

\title{Category Theory Notes}
\author{}

\begin{document}

\maketitle

\tableofcontents
\newpage

\chapter{Category theory}

\section{What is category theory}

``As a first approximation category theory is the abstract algebra of
functions.'' - Steve Awodey

\subsection{Definition of a category}

A category consists of
\begin{itemize}
  \item objects, A, B, C, ...
  \item arrows f, g, h, ... each function have a domain $dom(f)$ and codomain
    $cod(f)$ for each composable pair of arrows $\arr{f}{A}{B}$ and
    $\arr{g}{B}{C}$.
\end{itemize}

A category must satisfy the following laws.
\begin{itemize}
  \item Unit
  \item Associativity
\end{itemize}

\subsection{Examples of categories}

\begin{itemize}
  \item \textbf{Sets}. The objects are sets and the arrows are functions.
  \item \textbf{1}. The category with one object and one arrow. It looks like this.
    \[
      \begin{tikzcd}
        \bullet \arrow[loop right]
      \end{tikzcd}
    \]
  \item A poset $(P, \leq)$ (partially ordered set) is a set $P$ with a binary
    relation $\leq$ that satisfies reflexivity, antisymmetry, and transivity.
    Any poset forms a category where the elements of the category are the
    objects of $P$ and where for two objects $a$ and $b$ there is an arrow from
    $a$ to $b$ iff. $a \leq b$:
    \[
      p \rightarrow q \iff p \leq q
    \]
    A category based on a poset is called a \emph{poset category}.

    Note that \textbf{Poset} is a category with ``few'' arrows. Between two
    objects $p$ and $q$ there is at most one arrow.

  \item \textbf{Poset} (or \textbf{Pos}) The category where the objects are all
    posets and the arrows are monotone functions.

  \item Any monoid forms a category. The category contains a single object. Each
    element in the monoid is an arrow in the category and composition of arrows
    is the composition from the monoid. The identity arrow is the identity
    element in the monoid. This construction satisfies the law of a category
    directly from the laws of a monoid.

    Note that a category based on a monoid is a category with ``few'' objects.
    There is only a single objects. Furthermore a category with one object is
    always a monoid. Thus, \emph{a monoid is just a category with one object}.

  \item \textbf{Monoid} (or \textbf{Mon}) The category where the objects are all
    monoid and the arrows are monoid homomorphisms.

  \item \textbf{Rel}. The objects are sets and the arrows are relations.
\end{itemize}

\section{Commutative diagrams}

In category theory equations can be expressed using commutative diagrams. When
we draw a diagram like the following.
\[
\begin{tikzcd}
  A \arrow[r, "f"] \arrow[d, "h"']
  & B \arrow[d, "g"] \\
  C \arrow[r, "p"] & D
\end{tikzcd}
\]
It is supposed to communicate that $f \circ g = h \circ p$. In such cases we
say the ``the diagram commutes'' to denote the properties that the diagram
indicates that the arrows have.

As another example, consider this diagram:
\[
  \begin{tikzcd}
    A \arrow[r, "f"] \arrow[dr, "h"] & B \arrow[d, "g"] \\
                                     & C
  \end{tikzcd}
\]
We say that the triangle \emph{commutes} if $f \circ g = h$.

In general it is the case that for a commutative diagram all paths with the same
origin and end are equal.

\section{Constructing categories}

For a category $C$, its opposite category $C^{op}$ is the category obtained by
formally reversing the direction of all its arrows.

% FIXME: What does formal mean in the definitio above?

\section{Universal Mapping Properties}

A universal mapping property is used to define things in categorical way.

Universal mapping properties determine things uniquely up to isomorphism.

\section{Functor}

\begin{definition}[Functor]
  A functor $\arr{F}{\mathbf{C}}{\mathbf{D}}$ is a map between categories. It
  consists of two parts:
  \begin{itemize}
  \item A mapping between objects:
    $\arr{F_{obj}}{obj(\mathbf{C})}{(obj\mathbf{D})}$.
  \item A mapping between arrows:
    $\arr{F_{arr}}{arr(\mathbf{C})}{(arr\mathbf{D})}$.
  \end{itemize}
  However, we usually just write $F$ and treat it as an overloaded function that
  can be applied to both arrows and objects. A functor must satisfy three laws:
  \begin{itemize}
  \item Preserves domain and codomain. $F(\arr{f}{A}{B}) =
    \arr{F(f)}{F(A)}{F(B)}$
    \item Preserve identities. $F(\id_A) = \id_{F(A)}$
    \item Preserve composition: $F(g \circ f) = F(g) \circ F(f)$
  \end{itemize}
\end{definition}

\section{Isomorphisms}

\begin{definition}[Isomorphism]
  An isomorphism is an arrow with an inverse.
\end{definition}

Examples.
\begin{itemize}
  \item In a monoid category the isomorphisms are the elements that have an inverse.
  \item in a group every element has an inverse. Therefore, in a group every
    arrow is and isomorphism.
\end{itemize}

\begin{proposition}
  If $\arr{f}{A}{B}$ and $\arr{g}{B}{C}$ are isomorphisms then their composition
  $f \circ g$ is also an isomorphism and the inverse is
  \[ (f \circ g)^{-1} = g^{-1} \circ f^{-1} \]
  This means that isomorphisms compose into isomorphisms
\end{proposition}
\begin{proof}
  First we show that $g^{-1} \circ f^{-1}$ is a right inverse.
  \[ (f \circ g) \circ (g^{-1} \circ f^{-1}) = f \circ (g \circ g^{-1}) \circ
    f^{-1} = f \circ f^{-1} = id_A \]

  Then we show that $g^{-1} \circ f^{-1}$ is a left inverse.
  \[ (g^{-1} \circ f^{-1}) \circ (f \circ g) = g^{-1} \circ (f^{-1} \circ f)
    \circ g = g^{-1} \circ g = id_B\]
\end{proof}

\section{Monomorphism and epimorphism}

\subsection{Monomorphism}

\begin{definition}{Monomorphism}
  In a category $\bf{C}$, an arrow $\arr{f}{A}{B}$ is a \emph{monomorphism} if
  for any $g, h : C \rightarrow A$ it is the case that $fg = fh \implies g = h$.
  \[
  \begin{tikzcd}
    C \ar[r, shift left, "g"] \ar[r, shift right, "h"'] & A \arrow[r, "f"] & B
  \end{tikzcd}
  \]
\end{definition}

A monomorphism is also called a \emph{mono} and it is said to be \emph{monic}.

Mnemonic: A monomorphism is the categorical equivalent to an \emph{injective}
function, that is a one-to-one function, and \emph{mono} means \emph{one}.

\begin{proposition}
  A function $\arr{f}{A}{B}$ between sets is monic in $\bf{Sets}$ if and only if
  it is injective.
\end{proposition}
\begin{proof}
  ($\Rightarrow$) Assume $f$ is a monomorphism in $\bf{Sets}$. We must show that
  $f$ is an injective function. Let $a, a' \in A$ where $a \neq a'$. We are done
  if we can show that $f(a) \neq f(a')$.

  ($\Leftarrow$) Assume $f$ is an injective function. We must show that $f$ is a
  monomorphism.
\end{proof}

\begin{definition}{Epimorphism}
  In a category $\bf{C}$, an arrow $\arr{f}{A}{B}$ is an \emph{epimorphism} if
  for any $\arr{i, j}{B}{D}$ it is the case that $if = jf \implies i = j$.

  \begin{tikzcd}
    A \ar[r, "f"] & B \ar[r, shift left, "i"] \ar[r, shift right, "j"'] & D
  \end{tikzcd}

  An epimorphism is said to be \emph{epic}.
\end{definition}

Why does a surjective funtion satisfy $if = jf \implies i = j$. Intuitively
since $f$ reaches its entire domain then any differences in $i$ and $j$ whould
be exposed in the composition. If there was some elements in $B$ that where
never reached by $f$ then the functions $i$ and $j$ could differ for those
elements such that $if = jf$ without $i = j$ being true.

\begin{proposition}
  A function $\arr{f}{A}{B}$ between sets is an epimorphism in $\bf{Sets}$ if
  and only if it is surjective.
\end{proposition}
\begin{proof}
  ($\Rightarrow$) Assume $f$ is an epimorphism. We must show that $f$ is a
  surjective function. Let $b$ be an element in $B$. Let $d, d' \in D$ where $d
  \neq d'$ and define $\arr{i}{B}{D}$ as the function that maps every element
  in $B$ to $d$ except for $b$ which it maps to $d'$.
  \[
    i(x) = \begin{cases}
      d' & x = b \\
      d & \text{otherwise}
    \end{cases}
  \]
  Let $\arr{j}{B}{D}$ be a constant function that sends every element to $d$.
  \[
    j(x) = d
  \]
  Since $i \neq j$ we have $if \neq jf$. Thus there exists some $a \in A$ where
  $i(f(a)) \neq j(f(a))$. But $i$ and $j$ are equal for all arguments except
  $b$. Hence $f(a) = b$. Since $b$ was arbitrary this shows that $f$ is
  surjective.

  ($\Leftarrow$) Assume that $f$ is a surjective function. We must show that $f$
  is an epimorphism. Let $\arr{i, j}{B}{D}$ be arbitrary functions where $i \neq
  j$. Then there exists some $b \in B$ where $i(b) \neq j(b)$. Since $f$ is
  surjective there must exist an $a \in A$ where $b = f(a)$. Putting this
  together we have:

  \begin{align*}
    i(b) &\neq j(b) && \text{since $i \neq j$} \\
    i(f(a)) &\neq j(f(a)) && \text{from how we defined $b$}
  \end{align*}

  Therefore $if \neq jf$.
\end{proof}

\begin{proposition}
  In a poset category all arrows are both monic and epic.
\end{proposition}
\begin{proof}
  Let $\arr{f}{A}{B}$ be an arrow in a poset category. Per the definition of a
  poset category there is always only a single arrow between two objects.
  Therefore if we have $\arr{g, h}{C}{A}$ such that $fg = fh$ we can conclude
  that $g = h$ since they are both arrows between $C$ and $A$. Therefore $f$ is
  monic. Similarly, if $\arr{i, j}{B}{D}$ such that $if = jf$ then $i = j$ and
  $f$ is a epic.
\end{proof}

\begin{proposition}
  In a poset category all arrows are both monic and epic.
\end{proposition}
\begin{proof}
  Let $\arr{f}{A}{B}$ be an arrow in a poset category. Per the definition of a
  poset category there is always only a single arrow between two objects.
  Therefore if we have $\arr{g, h}{C}{A}$ such that $fg = fh$ we can conclude
  that $g = h$ since they are both arrows between $C$ and $A$. Therefore $f$ is
  monic. Similarly, if $\arr{i, j}{B}{D}$ such that $if = jf$ then $i = j$ and
  $f$ is a epic.
\end{proof}

\begin{proposition}
  Every isomorphism is also a monomorphism and epimorphism.
\end{proposition}
\begin{proof}
  (Monomorphism) Let $m$ be an isomorphism with inverse $m^{-1}$, then $mx = my$
  implies that $x = m^{-1}mx = m^{-1}my = y$ giving us that $m$ is a
  monomorphism.

  (Epimorphism) Let $m$ be an isomorphism with inverse $m^{-1}$, then $xm = ym$
  implies that $x = xm^{-1}m = ym^{-1}m = y$ giving us that $m$ is an
  epimorphism.
\end{proof}

\begin{definition}[Split mono and split epic]
  An arrow $\arr{f}{A}{B}$ is a \emph{split mono} if it has a \emph{left}
  inverse. That is, an arrow $\arr{g}{C}{A}$ such that
  \[ gf = \id_A \]

  An arrow $\arr{f}{A}{B}$ is a \emph{split epi} if it has a \emph{right}
  inverse. That is, an arrow $\arr{g}{B}{C}$ such that
  \[ fg = \id_B \]
\end{definition}

When a mono is a split mono we say that the \emph{mono splits}.

\subsection{A summary of monos, epis, and split monos and epis}

\begin{itemize}
\item A mono cancels on the \emph{left}: $\forall g, h : fg = fh \implies g = h$.
\item A split mono is an arrow with a \emph{left} inverse: $\exists g : gf = \id_A$.
\item An epi cancels on the \emph{right} $\forall i, j : if = jf \implies i = j$.
\item A split epi is an arrow with a \emph{right} inverse: $\exists g : fg = \id_B$.
\end{itemize}

\begin{proposition}[Inverses are unique]
  If an arrow $\arr{f}{A}{B}$ has two inverses $\arr{g, g'}{B}{A}$ then $g =
  g'$.
\end{proposition}
\begin{proof}
  Consider the commutative diagram below.
  \[
    \begin{tikzcd}
      B \arrow[r, "id_B"] \arrow[d, "g"'] & B \arrow[d, "g'"] \\
      A \arrow[r, "id_A"'] \arrow[ru, "f"] & A
    \end{tikzcd}
  \]
  From the diagram we can derive the following equality.
  \[
    g' = g' \id_B = g' (f g) = (g' f) g = \id_A g = g
  \]
\end{proof}

\section{Initial and terminal objects}

\begin{definition}[Initial]
  An object $0$ is terminal if for any object $C$ there is a unique morphism
  $\arr{F}{0}{C}$.
  \[
    \begin{tikzcd}
      0 \arrow[r, dashrightarrow, "f"] & C
    \end{tikzcd}
  \]
  In other words an initial object is an object that has a single arrow to all
  other objects. Visually it looks like this.
  \[
    \begin{tikzcd}
      & 0 \arrow[ld] \arrow[d] \arrow[rd] \\
      A & B & C
    \end{tikzcd}
  \]
  Note that this is a universal mapping property. $\forall C \exists! f$.
\end{definition}

\begin{definition}[Terminal]
  An object $1$ is terminal if for any object $C$ there is a unique morphism
  $\arr{F}{C}{1}$.
  \[
    \begin{tikzcd}
      C \arrow[r, dashrightarrow, "f"] & 1
    \end{tikzcd}
  \]
  In other words a terminal object is an object that every other object has a
  single arrow towards. Visually it looks like this.
  \[
    \begin{tikzcd}
      A \arrow[rd] & B \arrow[d] & C \arrow[ld] \\
      & 1
    \end{tikzcd}
  \]
  Note that this is an universal mapping property. $\forall C \exists! f$.
\end{definition}

\section{Products}

\subsection{Binary product}

\begin{definition}[Product]
  A product of two objects $A$ and $B$ consists of an object $P$ and two
  projection arrows $\arr{p_1}{P}{A}$ and $\arr{p_2}{P}{B}$.
  \[
    \begin{tikzcd}
      A & P \arrow[l, "p_1"'] \arrow[r, "p_2"] & B
    \end{tikzcd}
  \]
  The above must satisfy the universal mapping property that $\forall x, f_1,
  f_2 \exists! u$ such that the following diagram commutes.
  \[
    \begin{tikzcd}
      & X \arrow[ld, "x_1"'] \arrow[d, dashrightarrow, "u"] \arrow[rd, "x_1"] \\
      A & P \arrow[l, "p_1"] \arrow[r, "p_2"'] & B
    \end{tikzcd}
  \]
\end{definition}

Let us try an unpack that definition. Note that the definition doesn't say
anything about what a product \emph{is}. It only describes a property that a
product should have in order for it to be a product. But, why does that
definition make sense?

Consider a programming library that implements a product or pair data-structure
in a programming language. It would have to expose a constructor for pairs
\texttt{makePair : A -> B -> Pair A B} and two functions for extracting values
again \texttt{fst : Pair A B -> A} and \texttt{snd : Pair A B -> B}. As a user
of such a library we would expect that creating a pair of two elements and
extracting them again gives us the exact same elements that we put in. In other
words we expect that for any $a$ it is the case that \texttt{fst (makePair a b)
  == a}. This is exactly what the existence part of the definition says. If $P$
is a product and we have an object $X$ from which we can extract two values
$x_1$ and $x_2$ (i.e. $X$ contains $x_1$ and $x_2$) then there must be a way to
construct a product based on $X$ such that when we later extract the two values
with $p_1$ and $p_2$ we get back the exact same value that we had in $X$. The
UMP ensures that the pair data-structure doesn't ``mess'' with the elements we
insert into it. The uniqueness part of the definition requires that there is
only one possible way for $P$ to store the two values that we have in $X$. This
means that it must not be possible for $P$ to support two different
\texttt{makePair} functions.

In the general case it is not possible to turn two objects into a pair. That is,
if $A$ and $B$ is two objects $A \times B$ may not exist in the category. If a
category has a product for every pair of objects then the category is said to
\emph{have binary products} and is said to be \emph{a category with binary
  products}.

\subsection{Non-examples of products}

\begin{itemize}
\item Define a product of sets as follows:
  \[ A \times B = \{ (n, a, b) \mid n \in \{ 0, 1 \}, a \in A, b \in B \}\]
  With the two projection functions.
  \begin{align*}
    \pi_1(n, a, b) = \begin{cases} a & n = 0 \\ b & n = 1 \end{cases} &&
    \pi_2(n, a, b) = \begin{cases} b & n = 0 \\ a & n = 1 \end{cases}
  \end{align*}
  This is not a product since it does not satisfy the uniqueness constraint in
  the UMP that a product must satisfy.
\end{itemize}

\begin{lemma}
  Products are unique up to isomorphism. That is, if $A \times B$ and $A' \times
  B'$ are products in a category $\bf{C}$ then.
  $$
  A \times B \cong A' \times B'
  $$
\end{lemma}
\begin{proof}
  TODO
\end{proof}

The above theorem tells us that all products are the same except for unimportant
details.

\begin{lemma}
  In a category with binary products the binary product operation $A \times B$
  is associative up to isomorphism.
  \[
    (A \times B) \times C \cong a \times (B \times C)
  \]
\end{lemma}
\begin{proof}

\end{proof}

\section{Hom-sets}

\begin{definition}
  Given a locally small category $\bf{C}$ and objects $A$ and $B$ the set
  $\Hom(A, B)$ is all the homomorphisms from $A$ to $B$.

  \begin{align*}
    \Hom_{\mathbf{C}}(A, B) &= \text{ all arrows from } A \text{ to } B \\
                          &= \{ f \in \mathbf{C} \mid f : A \rightarrow B \}
  \end{align*}
\end{definition}

Such a set of arrows is called a \emph{Hom-set}. Since $\Hom(A, B)$ is an
element in $\mathbf{Sets}$ this function gives us a way to turn any pair of
objects in any (locally small) category into an \emph{object in
  $\mathbf{Sets}$}.

Based on this we can define a function.
\begin{align*}
  \Hom(A, g) : \Hom(A, B) \to \Hom(A, B') \\
  (f : A \to B) \mapsto (g \circ f : A \to B \to B')
\end{align*}

Note that the notation is overloaded! $\Hom(A, B)$ is the set of all arrows from
$A$ to $B$. But $\Hom(A, g)$ is a function from arrows from $A$ to $B$
($\Hom(A, B)$) to arrows from $A$ to $B'$ ($\Hom(A, B')$).

\begin{itemize}
\item For an \emph{object} $B$: $\Hom(A, B)$ is an \emph{object} in $\mathbf{Sets}$.
\item For an \emph{arrow} $g$: $\Hom(A, g)$ is an \emph{arrow} in $\mathbf{Sets}$.
\end{itemize}

Note that the overloading above is the exact same overloading that we use with
functors. In other words we have exactly the ingredients for a functor.

\section{Duality}



\chapter{Exercises}

\section{2}

\subsection{2.4}

Consider the commutative triangle,
\[
  \begin{tikzcd}
    A \arrow[r, "f"] \arrow[dr, "h"] & B \arrow[d, "g"] \\
                                     & B
  \end{tikzcd}
\]
In other words the situration where $h = gf$.
\begin{itemize}
  \item if $f$ and $g$ are isos then so is $h$. This is true because
    isomorphisms compose into isomorphisms.
  \item if $f$ and $g$ are monos then so is $h$.
    \begin{align*}
      h a &= h a' \\
      g f a &= g f a' \\
      f a &= f a' && \text{because $g$ is a mono} \\
      a &= a' && \text{because $f$ is a mono} \\
    \end{align*}
    Therefore $h$ is a mono.
  \item if $f$ and $g$ are epis then so is $h$.
    \begin{align*}
      a h &= a' h \\
      a g f &= a' g f \\
      a g &= a' g && \text{because $f$ is an epi} \\
      a &= a' && \text{because $g$ is an epi} \\
    \end{align*}
    Therefore $g$ is an epi.
  \item if $h$ is monic then so is $f$. Assume $h$ is monic.
    \[
      f x = f x' \implies g f x = g f x' \implies h x = h x' \implies x = x'
    \]
    So $f$ is monic.
  \item if $h$ is monic then so is $g$. Assume $g$ is monic. \[ x g = x' g
    \implies x g f = x' g f \implies x h = x' h \implies x = x' \]
  \item $h$ can be monic without $g$ being monic. Consider the category
    $\bf{Sets}$. Let $\arr{h}{\{1\}}{\{3\}}$. Define $\arr{f}{\{1\}}{\{1,2\}}$
    as the function that maps $1$ to $2$. Definet $\arr{g}{\{1,2\}}{\{3\}}$ as
    the function that maps both $1$ and $2$ to $3$. Clearly $g$ is not
    surjective and thus not monic. But $h = g \circ f$ is surjective and thus
    monic. Is an injective function.
\end{itemize}

An arrow is not nececarilly an isomorphism even if it is monic and epic.

\subsection{2.5}

(a) $\implies$ (b): Assume $f$ is an isomorphism. We know that any isomorphism
is a mono. $f f^{-1} = \id_B$ so $f$ has a left inverse and is a split epi.

(b) -> (c): \[ f \id = f = (f f^{-1}) f = f (f^{-1} f)  \] Derfor per mono er
\[ f^{-1} f = \id \]

(b) $\implies$ (c): Assume $f$ is a mono and a split epi. There exists an $e$
such that $fe = \id$. To show that $f$ is an epi let $\arr{i, j}{B}{D}$ and
consider
\[
  if = jf \implies ife = jfe \implies i = j
\]
So $f$ is an epi. To show that $f$ is a split mono we must find a $g$ such that
$gf = id_A$.

(c) $\implies$ (d):

(d) $\implies$ (a): Assume $f$ is both a split mono and a split epi. We know
that there exists a $\arr{g}{B}{A}$ such that $gf = \id_A$ and a
$\arr{g'}{B}{A}$ such that $fg' = \id_B$. Putting this together we have.
\[
  g = g \id_B = g (f g') = (g f) g' = \id_A = g'
\]
Thus $gf = \id_A$ and $fg = \id_B$. This makes $g$ an inverse for $f$ which
makes $f$ and isomorphism.

\subsection{2.15}

Assume $A$ and $B$ have a product in $C$: $A \times B = (P, p_1, p_2)$. Clearly
this triple is an object in $\mathbf{C}$. Consider now any object $Q = (X, x_1,
x_2)$ in $\mathbf{C}$. Since $A \times B$ is a product we have, from the UMP for
products, that there is a unique morphism from $Q$ to $A \times B$.

Assume that $\mathbf{C}_{A, B}$ has a terminal object $(X, x_1, x_2)$. Observe
that an arrow $\arr{f}{Y, y_1, y_2}{X, x_1, x_2}$ is one that makes the
following diagram commute.

\[
  \begin{tikzcd}
    & Y \arrow[ld, "y_1"'] \arrow[d, dashrightarrow, "f"] \arrow[rd, "y_1"] \\
    A & X \arrow[l, "x_1"] \arrow[r, "x_2"'] & B
  \end{tikzcd}
\]

The fact that $(X, x_1, x_2)$ is a terminal objects mean that there exists a
unique $f$ that makes the diagram commute. But this is exactly the UMP for
products and implies that $(X, x_1, x_2)$ is a product for $A$ and $B$ in
$\mathbf{C}$.

\subsection{2.17}

\section{3}

\subsection{1

\subsection{2}

\subsection{3}

\subsection{4}

\subsection{6}

\subsection{10}

\subsection{11}

\subsection{12}

\subsection{13}

\subsection{14}

\end{document}